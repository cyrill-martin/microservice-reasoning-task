<!DOCTYPE html5>
<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <link rel="stylesheet" href="{{ url_for('static', filename='css/reasoning-task.css') }}">
        <title>Reasoning</title>
    </head>
    <body>
        <form action="http://localhost:50001" method="POST" enctype="multipart/form-data">
            <div id="data">
                <span class="inpt">Data</span>
                <div class="files" id="data_files">
                    <textarea name="data_uploads" id="data_uploads" placeholder="Upload data files..." readonly ></textarea>
                    <input class="upload_btn" type="file" id="upl_data" name="upl_data" 
                    multiple 
                    onchange="javascript:updateList('upl_data', 'data_uploads')">
                </div>
                <div class="urls" id="data_urls">
                    <textarea name="data_list" id="data_list" placeholder="...or you can insert data URLs here (line by line)"></textarea>
                </div>
            </div>

            <div id="rules">
                <span class="inpt">Rules</span>
                <div class="files" id="rule_files">
                    <textarea name="rule_uploads" id="rule_uploads" placeholder="Upload rule files..." readonly></textarea>
                    <input class="upload_btn" type="file" id="upl_rules" name="upl_rules" 
                    multiple
                    onchange="javascript:updateList('upl_rules', 'rule_uploads')">
                </div>
                <div class="urls" id="rule_urls">
                    <textarea name="rule_list" id="rule_list" placeholder="...or you can insert rule URLs here (line by line)"></textarea>
                </div>
            </div>

            <div id="query">
                <span class="inpt">Query</span>
                <div class="files" id="query_file">
                    <textarea name="query_uploads" id="query_uploads" placeholder="Upload query files..." readonly></textarea>
                    <input class="upload_btn" type="file" id="upl_queries" name="upl_queries"
                    multiple
                    onchange="javascript:updateList('upl_queries', 'query_uploads')">
                </div>
                <div class="urls" id="query_url">
                    <textarea name="query_list" id="query_list" placeholder="...or you can insert query URLs here (line by line)"></textarea>
                </div>
            </div>

            <div id="parameters">
                <span class="param">The parameters (currently readonly)</span>
                <textarea id="param_list" readonly>--nope</textarea>
            </div>
            <input id="reason" type="submit" value="Reason">
        </form>

        <div id="console">
            {% if output %}
            <div id="output">
{{ output }}
            </div>
            {% else %}
            <div id="output">
            </div>
            {% endif %}
        </div>

        <script>
            updateList = function(input, output) {
                var input = document.getElementById(input);
                var output = document.getElementById(output);
                var children = "";
                for (var i = 0; i < input.files.length; ++i) {
                    children += input.files.item(i).name + "\n";
                }
                output.innerHTML = children;
            };
        </script>

    </body>
</html>
